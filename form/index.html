<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <title>Brainload Form</title>
    <meta http-equiv="Cache-control" content="No-Cache">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- , maximum-scale=1.0, user-scalable=no -->
    <link rel="icon" type="image/svg+xml" href="https://dev.rasal.de/brainload/templates/images/brain.png">
    <!-- <link rel="stylesheet" href="pure.css"> -->


    <!-- <script src=" "></script> -->
    <!-- <link rel="stylesheet" href=" "> -->


    <link rel="stylesheet" href="css/reseter.css" />
    <link rel="stylesheet" href="css/style.css">
    <script src="js/formtoobj.js"></script>
    <script src="js/md5.js"></script>
    <script src="js/debugHelper.js"></script>
    <script src="js/longpress.js"></script>



    <script src="js/chartJS.js"></script>
    <script src="js/luxon.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-zoom/1.1.1/chartjs-plugin-zoom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>

</head>

<body>
    <div id=formcontent></div>
    <div id=overlay></div>
    <div id=content>

        <div id="header">
            <div id=profil><a href="#profil" class=blueFont>Profil</a></div>
            <div id=mood><a href="#mood" class=orangeFont>Mood</a></div>
            <div id=chart><a href="#chart" class=greenFont>Chart</a></div>
            <div id=datalink></div>
            <div id=dellocal><a href="#dellocal" class=redFont>X</a></div>
        </div>

        <!-- 
                        PROFIL FORM 
        -->
        <form id=ProfilForm autocomplete="off">
            <fieldset>
                <legend>Profil</legend>



                <div class="profil_1">
                    <div class="name">
                        <label for="P_Name">Name</label>
                        <input type="text" id="P_Name" name=Name value=ADXS>
                    </div>
                    <div class="password">
                        <label for="P_Password">Passwort</label>
                        <input type="password" id="P_Password" name=Passwort value=ADXS>
                    </div>
                    <div class="freigeben">
                        <label id="Daten freigeben">Daten</label>
                        <input type=checkbox class=hidden id=P_Freigeben name=Freigeben checked>
                        <label class="buttonlabel zyklus" for=P_Freigeben>freigeben</label>
                    </div>
                </div>


                <div class="profil_1">
                    <div class="alter">
                        <label for="P_Alter">Geburtsjahr</label>
                        <input type="number" id="P_Alter" name=Alter placeholder=1982>
                    </div>
                    <div class="geschlecht">
                        <label for="P_Geschlecht">Geschlecht</label>
                        <select id="P_Geschlecht" name=Geschlecht>
                            <option disabled selected hidden></option>
                            <option>divers</option>
                            <option>weiblich</option>
                            <option>m√§nnlich</option>
                            <option>keine Angabe</option>
                        </select>
                    </div>
                    <div class="zyklus">
                        <label id=Zyklus>Zyklus</label>
                        <input type=checkbox class=hidden id=P_Zyklus name=Zyklus>
                        <label class="buttonlabel zyklus" for=P_Zyklus>abfragen</label>
                    </div>
                </div>


                <div class="profil_2">
                    <div class="subtyp">
                        <label for="P_Subtyp">ADHS-Subtyp</label>
                        <select id="P_Subtyp" name=Subtyp>
                        <option disabled selected hidden></option>
                        <option>ADHS</option>
                        <option>ADS</option>
                        <option>Mischtyp</option>
                        <option>keine Angabe</option>
                    </select>
                    </div>
                    <div class="diagnosen">
                        <label for="P_Diagnosen">weitere Diagnosen</label>
                        <input type="text" id="P_Diagnosen" name=Diagnosen>
                    </div>
                </div>

                <label class="" for=situation>Wirkungen abfragen: </label>
                <div id=WirkungCheckboxes>


                </div>
                <div class="kommentar profil">
                    <label class="itemLabel comment" for=P_Kommentar>Kommentar: </label>
                    <textarea name="P_Kommentar" id="P_Kommentar"></textarea>
                </div>
                <br>
                <button type="submit" id=submitProfil>Absenden</button>
            </fieldset>
        </form>



        <!-- 
                        MOOD FORM 
        -->
        <form id=MoodForm autocomplete="off">
            <fieldset>
                <legend>How do you feel?</legend>
                <label id="MedikationHeading" class=SectionHeading>Medikation</label>

                <div id=Medikation_0 class=medikationSet>

                    <div class="medikation">
                        <div class="medikament">
                            <label for="M_Medikament[0]">Medikament <!---placeholder--></label>
                            <select id="M_Medikament[0]" name=Medikation[0][Medikament]>
                                <option disabled selected hidden></option>
                                <option>Attentin</option>
                                <option>Elvanse</option>
                                <option>Elvanse Adult</option>
                                <option>Ritalin (unretardiert)</option>
                                <option>Medikinet (unretardiert)</option>
                                <option>Ritalin Retard</option>
                                <option>Medikinet Retard</option>
                                <option>Equasym</option>
                                <option>Ritalin Adult</option>
                                <option>Medikinet Adult</option>
                                <option>Kinecteen</option>
                                <option>Concerta</option>
                                <option>Strattera</option>
                                <option>Intuniv </option> 
                            </select>
                        </div>
                        <div class="dosierung">
                            <label for="M_Dosierung[0]">Dosierung</label>
                            <input type="number" id="M_Dosierung[0]" name=Medikation[0][Dosierung]>
                            <!-- <select id="M_Dosierung[0]" name=Medikation[0][Dosierung]>
                                <option disabled selected hidden></option>
                                <option>2.5 mg</option>
                                <option>5 mg</option>
                                <option>10 mg</option>
                                <option>20 mg</option>
                                <option>30 mg</option>
                                <option>40 mg</option>
                                <option>50 mg</option>
                                <option>60 mg</option>
                                <option>70 mg</option>
                                <option>80 mg</option>
                            </select> -->
                        </div>
                        <div class="zeitpunkt">
                            <label for="M_Zeitpunkt[0]">Zeit</label>
                            <input type="time" id="M_Zeitpunkt[0]" name=Medikation[0][Zeitpunkt]>
                        </div>
                    </div>

                    <div class=medikation>
                        <div class="seitwann">
                            <label for="M_SeitWann[0]">seit wann</label>
                            <input type="date" id="M_SeitWann[0]" name=Medikation[0][SeitWann]>
                        </div>
                        <div class="wirkzeit">
                            <label>&nbsp;</label>
                            <input type=checkbox class=hidden id=P_Wirkzeit[0] name=Medikation[0][Wirkzeit]>
                            <label class="buttonlabel wirkzeit" for=P_Wirkzeit[0]>innerhalb der Wirkzeit</label>
                        </div>
                    </div>


                </div>
                <!-- id=Medikation_0 -->


                <div id=AnmerkungMedikation class="kommentar medikament">
                    <label class="itemLabel comment" for=M_Kommentar[0]>Anmerkungen zur Medikation</label>
                    <textarea id="M_Kommentar[0]" name=Medikation[0][Kommentar]></textarea>
                </div>

                <div id=AddRemoveMedikation class="">
                    <label id=AddMedikation class='plusminus plus' onclick=newMedikation()></label>
                    <label id=RemoveMedikation class='plusminus minus' onclick=delMedikation()></label>
                </div>

                <!-- SITUATIONS -->
                <label id="SituationHeading" class=SectionHeading>Situation</label>

                <!-- <label class="itemLabel situation" for=situation>Situation: </label> -->
                <div id=SituationCheckboxes>
                </div>

                <label id="WirkungHeading" class=SectionHeading>Wirkung</label>

                <div id=MoodSlider>

                </div>

                <label id="KommentarHeading" class=SectionHeading>Kommentar</label>

                <div class="kommentar mood">
                    <!-- <label class="itemLabel comment" for=comment>Comment: </label> -->
                    <textarea name="comment" id="comment"></textarea>
                </div>
                <br>
                <br>
                <button type="submit" id=submitMood class="pure-button pure-button-primary">absenden</button>
            </fieldset>
        </form>

        <div id="AuswertungsChart">
            <fieldset>
                <legend>Auswertung</legend>
                <div id="ValueLines"></div>
                <div id="ChartTooltip">
                    <table>
                        <tr>
                            <td>
                                <div id="ChartToolDate"></div>
                            </td>
                            <td>
                                <div id="ChartToolSituation"></div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div id="ChartToolWirkungen"></div>
                            </td>
                            <td>
                                <div id="ChartToolMedikation"></div>
                                <div id="ChartToolKommentar"></div>
                            </td> 
                        </tr>

                    </table>
                </div>
                <div id="ChartLegend"></div>
                <!-- width="500" height="400" -->
                <canvas id="ChartCanvas"></canvas>
            </fieldset>

        </div>
    </div>

    <script src="js/randomData.js"></script>

    <script>
        //
        // user verification & data link 
        //
        var DataFreigegeben = document.getElementById('P_Freigeben').checked;
        var localDataNameField = document.getElementById('P_Name');
        var localDataName = md5(localDataNameField.value);
        var datalink = document.getElementById('datalink');

        // for navigation menu
        var ProfilLink = document.getElementById('profil');
        var ProfilForm = document.getElementById('ProfilForm');
        var MoodLink = document.getElementById('mood');
        var MoodForm = document.getElementById('MoodForm');
        var ChartLink = document.getElementById('chart');
        var AuswertungsChart = document.getElementById('AuswertungsChart');
        // link to delete localData
        var DelLocalLink = document.getElementById('dellocal');
        // all labels
        var labels = document.getElementsByTagName('label')
            // all form elements for populating
        let ProfilFormElements = document.getElementById('ProfilForm').elements;

        // // initial localData
        // var initObj = new Object({
        //     Profil: {
        //         Situations: {
        //             0: 'gerade aufgewacht',
        //             1: 'bei der Arbeit',
        //             2: 'zuhause',
        //             3: 'kann nicht schlafen',
        //         },
        //         Freigeben: "on",
        //     },
        //     Mood: {}
        // });


        // var localData = JSON.parse(localStorage.getItem(localDataName)) || initObj;
        // deb(localData)
        // deb(Object.values(localData.Mood), 'Mood values');
        // deb(Object.entries(localData.Mood), 'Mood entries');
        // var allMoods = Object.values(localData.Mood);
        // for (const mood of allMoods) deb(mood,'allMoods')
    </script>
    <script src="js/form.js"></script>
    <script>
        populateProfilForm();
        populateMoodForm();
        DataFreigeben();
        // showMessage(showSize());
    </script>
    <script src="js/chart.js"></script>
</body>

</html>